From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: zhoumingtao <zhoumingtao@loongson.com>
Date: Tue, 22 Feb 2022 08:27:13 +0000
Subject: webrtc add support for loongarch64

added loongarch64 build configuration

diff --git a/modules/desktop_capture/differ_block.cc b/modules/desktop_capture/differ_block.cc
index 4f0c5430c9a69b6f8be964d6479a7c583a9a8a6f..7d62f7d6a9d09df9eae3f730fc08d4b444b7ce0e 100644
--- a/modules/desktop_capture/differ_block.cc
+++ b/modules/desktop_capture/differ_block.cc
@@ -30,8 +30,8 @@ bool VectorDifference(const uint8_t* image1, const uint8_t* image2) {
   static bool (*diff_proc)(const uint8_t*, const uint8_t*) = nullptr;
 
   if (!diff_proc) {
-#if defined(WEBRTC_ARCH_ARM_FAMILY) || defined(WEBRTC_ARCH_MIPS_FAMILY)
-    // For ARM and MIPS processors, always use C version.
+#if defined(WEBRTC_ARCH_ARM_FAMILY) || defined(WEBRTC_ARCH_MIPS_FAMILY) || defined(WEBRTC_ARCH_LOONG_FAMILY)
+    // For ARM, MIPS and LoongArch processors, always use C version.
     // TODO(hclam): Implement a NEON version.
     diff_proc = &VectorDifference_C;
 #else
diff --git a/rtc_base/system/arch.h b/rtc_base/system/arch.h
index be2367b85f14d4cd6a7382d5a4b9fefc3dea29f2..c31ae35c455c9c2e63bb5fa141ea45de08278017 100644
--- a/rtc_base/system/arch.h
+++ b/rtc_base/system/arch.h
@@ -73,6 +73,10 @@
 #elif defined(__riscv) && __riscv_xlen == 32
 #define WEBRTC_ARCH_32_BITS
 #define WEBRTC_ARCH_LITTLE_ENDIAN
+#elif defined(__loongarch64)
+#define WEBRTC_ARCH_LOONG_FAMILY
+#define WEBRTC_ARCH_64_BITS
+#define WEBRTC_ARCH_LITTLE_ENDIAN
 #elif defined(__pnacl__)
 #define WEBRTC_ARCH_32_BITS
 #define WEBRTC_ARCH_LITTLE_ENDIAN
